    <!-- Tab Navigation -->
    <header class="window-header wb-general-header">
            <nav class="tabs" data-group="worldbuilder-tabs">
                <a class="item active" data-tab="main">
                <i class="fas fa-globe"></i>
                Main
                </a>
                <a class="item" data-tab="lairs">
                <i class="fas fa-dungeon"></i>
                Lairs
                </a>
                <!-- Still Needs Data Saving Will Add Later
                <a class="item" data-tab="location">
                <i class="fas fa-castle"></i>
                Locations
                </a> 
                -->
                <a class="item" data-tab="treasure">
                <i class="fas fa-gem"></i>
                Treasure
                </a>
                <a class="item" data-tab="magic-items">
                <i class="fas fa-hat-wizard"></i>
                Magic Items
                </a>
                <a class="item" data-tab="actors">
                <i class="fas fa-users"></i>
                Actors
                </a>
                <a class="item" data-tab="story">
                <i class="fas fa-book"></i>
                Story
                </a>
            </nav>
        <div class="tab-separator"></div>
    </header>

<form>
  <!-- TAB CONTENT-->

  <!-- MAIN TAB -->
  <section class="tab-content" data-tab="main">

          <div class="wb-page-container scrollable-container">
          <h3>Main</h3>

            <div>
                <label for="population-density-select">Population Density:</label>
                <select class="population-density-select" name="population-density">
                {{#each populationDensityOptions}}
                <option value="{{this.value}}" {{#if (eq ../populationDensity this.value)}}selected{{/if}}>{{this.label}}</option>
                {{/each}}
                </select>
            </div>

            <div>
                <label for="climate-select">Climate Type:</label>
                <select class="climate-select" name="climate-type">
                {{#each climateTypeOptions}}
                <option value="{{this.value}}" {{#if (eq ../climateType this.value)}}selected{{/if}}>{{this.label}}</option>
                {{/each}}
                </select>
            </div>

                <table class="icon-button-table">
                    <tr>
                        <td>
                        <button type="button" class="icon-button terrain-roll" title="Roll for Terrain">
                        <i class="fas fa-dice"></i>
                        </button>
                        </td>
                        <td>
                        <button type="button" class="icon-button feature-type-roll" title="Roll for Feature Type">
                        <i class="fa-solid fa-dice-d20"></i>
                        </button>
                        </td>
                        <td>
                        <button type="button" class="icon-button encounter-roll" title="Roll for Encounter">
                        <i class="fas fa-dice-d10"></i><i class="fas fa-dice-d10"></i>
                        </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: center;">Terrain</td>
                        <td style="text-align: center;">Feature Type</td>
                        <td style="text-align: center;">Encounter</td>
                    </tr>
                </table>

                <div class="form-group">
                    <label for="terrain-select">Terrain Type</label>
                    <select class="terrain-select" name="terrain-select">
                        {{#each terrainTypeOptions}}
                        <option value="{{this.value}}" {{#if (eq ../terrainType this.value)}}selected{{/if}}>
                        {{this.label}}
                        </option>
                        {{/each}}
                    </select>
                </div>

                <div class="form-group">
                    <label for="feature-type-select">Feature Type</label>
                    <select class="feature-type-select" name="feature-type-select">
                        {{#each featureTypeOptions}}
                        <option value="{{this.value}}" {{#if (eq ../featureType this.value)}}selected{{/if}}>{{this.label}}</option>
                        {{/each}}
                    </select>
                </div>

                <div class="form-group">
                    <label for="sub-feature-type-select">Sub-Feature Type</label>
                    <select class="sub-feature-type-select" name="sub-feature-type-select" {{#if subFeatureTypeOptions.length}} {{else}} disabled{{/if}}>
                        {{#each subFeatureTypeOptions}}
                        <option value="{{this.value}}" {{#if (eq ../subFeatureType this.value)}}selected{{/if}}>{{this.label}}</option>
                        {{/each}}
                    </select>
                </div>

                <div class="form-group">
                    <table class="terrain-info-table">
                    <thead>
                        <tr>
                            <td style="text-align: center;">Selected Terrain</td>
                            <td style="text-align: center;">Ruggedness</td>
                            <td style="text-align: center;">Travel Time</td>
                            <td style="text-align: center;">Encounter Frequency</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="text-align: center;">{{terrainType}}</td>
                            <td style="text-align: center;">{{ruggedness}}</td>
                            <td style="text-align: center;">{{travelTime}}</td>
                            <td style="text-align: center;">{{encounterFrequency}}</td>
                        </tr>
                    </tbody>
                    </table>
                </div>

                {{#if encounterResult}}
                <div class="form-group">
                    <table class="encounter-info-table">
                    <thead>
                        <tr>
                        <th>Encounter Result</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{{encounterResult}}}</td>
                        </tr>
                    </tbody>
                    </table>
                </div>
                {{/if}}

                <div class="form-group feature-type-section">
                    <table class="feature-info-table">
                    <thead>
                        <tr>
                        <th>Feature Type</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                            {{#if featureType}}{{featureType}}{{else}}No Feature Selected. Please select a feature type.{{/if}}
                            </td>
                        </tr>
                    </tbody>
                    </table>
                </div>

                <div class="form-group feature-details-section">
                    <table class="feature-info-table">
                    <thead>
                        <tr>
                        <th colspan="2">{{#if featureDetails.title}}{{featureDetails.title}}{{else}}Feature Details{{/if}}</th>
                        </tr>
                    </thead>
                        <tbody>
                        {{#if featureDetails.results}}
                        {{#each featureDetails.results}}
                        <tr>
                            <td>{{this}}</td>
                        </tr>
                        {{/each}}
                        {{else}}
                        <tr>
                            <td colspan="2">No details available. Select a sub-feature to view details.</td>
                        </tr>
                        {{/if}}
                        </tbody>
                    </table>
                </div>

          </div>

      </div>
  </section>


  <!-- LAIRS TAB -->
  <section class="tab-content wb-page-container wb-collapsible-section"  data-tab="lairs" style="display: none;">
  <h3>Lairs</h3>
  <button class="add-room">Add Room/Corridor</button>
      <div class="room-list">
      {{#each lairRooms}}

          <div class="room-entry">
              <h4 class="wb-header wb-collapsible {{#if this.collapsed}}collapsed{{/if}}" data-index="{{@index}}">
              Room {{@index}}
              </h4>

              <div class="room-details wb-collapsible-content" style="display: {{#if this.collapsed}}none{{else}}block{{/if}};">
                  <label for="lair-room-description-{{@index}}">Description</label>
                  <textarea id="lair-room-description-{{@index}}" class="lair-room-description" data-index="{{@index}}">
                      {{this.lairRoomDescription}}
                  </textarea>
                  <label for="lair-room-notes-{{@index}}">Notes</label>
                  <textarea id="lair-room-notes-{{@index}}" class="lair-room-notes" data-index="{{@index}}">
                      {{this.lairRoomNotes}}
                  </textarea>
                  <label for="lair-room-secrets-{{@index}}">Secrets</label>
                  <textarea id="lair-room-secrets-{{@index}}" class="lair-room-secrets" data-index="{{@index}}">
                      {{this.lairRoomSecrets}}
                  </textarea>
                  <label for="features-select">Features</label>
                  <select class="features-select" data-index="{{@index}}">
                      {{#each ../../featureOptions}}
                      <option value="{{this}}" {{#if (eq ../features.[0] this)}}selected{{/if}}>{{this}}</option>
                      {{/each}}
                  </select>
                  
                  <div class="encounter-section">
                      <label for="encounters-select-{{@index}}">Encounters</label>
                      
                      <div class="encounters-container" data-index="{{@index}}">
                          <table class="encounters-table" style="width: 100%; table-layout: fixed;">
                              <thead>
                                  <tr>
                                      <th style="width: 150px;"></th> <!-- Dropdown -->
                                      <th style="width: 400px;">Encounter Stat Block</th> <!-- Stat Block -->
                                      <th style="width: 25px;"></th> <!-- Randomize Button -->
                                      <th style="width: 25px;"></th> <!-- Remove Button -->
                                  </tr>
                              </thead>
                              <tbody>
                                  {{#each this.encounters}}
                                  <tr>
                                      <td style="width: 150px;">
                                        <select class="encounters-select" data-encounter-index="{{@index}}" style="width: 100%;">
                                            {{#each ../../encounterOptions}}
                                            <option value="{{this.id}}" {{#if (eq ../result this.id)}}selected{{/if}}>{{this.name}}</option>
                                            {{/each}}
                                        </select>

                                      </td>
                                      <td class="encounter-statblock" style="width: 400px; word-wrap: break-word;">
                                          {{{this.statblock}}}
                                      </td>
                                      <td style="width: 25px; text-align: center;">
                                          <button class="randomize-encounter" title="Randomize" style="width: 100%;">
                                              <i class="fa fa-random"></i>
                                          </button>
                                      </td>
                                      <td style="width: 25px; text-align: center;">
                                          <button class="remove-encounter" title="Remove" style="width: 100%;">
                                              <i class="fa fa-trash"></i>
                                          </button>
                                      </td>
                                  </tr>
                                  {{/each}}
                              </tbody>
                          </table>
                          <button class="add-encounter">Add Encounter</button>
                      </div>
                  </div>


                  <button class="randomize-trap">Randomize</button>
                  <button class="trap-builder">Open Trap Builder</button>
                  
                  <div class="treasure-section">
                  <label for="treasure-category-select-{{@index}}">Treasure Category</label>
                      
                      <div class="treasure-container" data-index="{{@index}}">
                      <table class="treasure-table">
                          <thead>
                          <tr>
                              <th>Category</th>
                              <th>Item</th>
                              <th>Description</th>
                              <th></th>
                              <th></th>
                          </tr>
                          </thead>
                          <tbody>
                          {{#each this.treasure}}
                          <tr>
                              <td>
<select class="treasure-category-select" data-treasure-index="{{@index}}">
  <option value="" disabled {{#if (eq ../selectedCategory "")}}selected{{/if}}>Make selection</option>
  {{#each ../../lairTreasureOptions as |items category|}}
  <option value="{{category}}" {{#if (eq ../selectedCategory category)}}selected{{/if}}>{{category}}</option>
  {{/each}}
</select>

                              </td>
                              <td>
<select class="treasure-item-select" data-treasure-index="{{@index}}">
  <option value="" disabled {{#if (eq ../result "")}}selected{{/if}}>Make selection</option>
  {{#if ../../lairTreasureOptions.[../selectedCategory]}}
    {{#each ../../lairTreasureOptions.[../selectedCategory] as |item|}}
      <option value="{{item.id}}" {{#if (eq ../result item.id)}}selected{{/if}}>{{item.name}}</option>
    {{/each}}
  {{else}}
    <option value="" disabled>No items available</option>
  {{/if}}
</select>

                              </td>
                              <td class="treasure-details" data-treasure-index="{{@index}}">
                              <span>Quantity: {{../quantity}}</span><br>
                              <span>Cost: {{../cost}} {{../currencyType}}</span><br>
                              <span>XP Value: {{../xpValue}}</span>
                              </td>
                              <td>
                              <button class="randomize-treasure" title="Randomize">
                              <i class="fa fa-random"></i>
                              </button>
                              </td>
                              <td>
                              <button class="remove-treasure" title="Remove">
                              <i class="fa fa-trash"></i>
                              </button>
                              </td>
                          </tr>
                          </tr>
                          {{/each}}
                          </tbody>
                      </table>
                      </div>

                      <button class="add-treasure">Add Treasure</button>

                </div>
            </div>
          </div>
      {{/each}}
      </div>
  </section>

<!-- Location TAB -->
<section class="tab-content" data-tab="location" style="display: none;">
    <h3>Location</h3>

    <!-- Dynamic Location Type -->
    <label for="location-type-select">Location Type</label>
    <select class="location-type-select" id="location-type-select">
        <option value="Plane" {{#ifEquals location.type "Plane"}}selected{{/ifEquals}}>Plane</option>
        <option value="Celestial" {{#ifEquals location.type "Celestial"}}selected{{/ifEquals}}>Celestial</option>
        <option value="Planet" {{#ifEquals location.type "Planet"}}selected{{/ifEquals}}>Planet</option>
        <option value="Geographical" {{#ifEquals location.type "Geographical"}}selected{{/ifEquals}}>Geographical</option>
        <option value="Settlement" {{#ifEquals location.type "Settlement"}}selected{{/ifEquals}}>Settlement</option>
        <option value="Point of Interest" {{#ifEquals location.type "Point of Interest"}}selected{{/ifEquals}}>Point of Interest</option>
    </select>

    <!-- Settlement-Specific Fields -->
    {{#ifEquals location.type "Settlement"}}
    <div class="location-details">
        <label for="wbTownComSize">Community Size</label>
        <select id="wbTownComSize" class="wbTownComSize">
            <option>Outpost</option>
            <option>Hamlet</option>
            <option>Village</option>
            <option>Small Town</option>
            <option>Large Town</option>
            <option>Small City</option>
            <option>Large City</option>
            <option>Metropolis</option>
            <option>Other</option>
        </select>

        <textarea class="wbTownOverview" placeholder="Overview">{{location.wbTownOverview}}</textarea>
        <textarea class="wbTownPopulation" placeholder="Population and Demographics">{{location.wbTownPopulation}}</textarea>
        <textarea class="wbTownDescription" placeholder="Description">{{location.wbTownDescription}}</textarea>
        <textarea class="wbTownNPC" placeholder="Notable NPCs">{{location.wbTownNPC}}</textarea>
        <textarea class="wbTownProfile" placeholder="Profile">{{location.wbTownProfile}}</textarea>
        <textarea class="wbTownStory" placeholder="Story">{{location.wbTownStory}}</textarea>
        <textarea class="wbTownPoi" placeholder="Points of Interest">{{location.wbTownPoi}}</textarea>
        <textarea class="wbTownVal" placeholder="Valuables">{{location.wbTownVal}}</textarea>
        <textarea class="wbTownIntRelation" placeholder="Internal Relationships">{{location.wbTownIntRelation}}</textarea>
        <textarea class="wbTownOutRelation" placeholder="Outward Relationships">{{location.wbTownOutRelation}}</textarea>
        <textarea class="wbTownBackground" placeholder="Background">{{location.wbTownBackground}}</textarea>
        <textarea class="wbTownAdditional" placeholder="Additional Details">{{location.wbTownAdditional}}</textarea>
    </div>
    {{/ifEquals}}

    <!-- Plane-Specific Fields -->
    {{#ifEquals location.type "Plane"}}
    <div class="location-details">
        <label for="wbPlaneRegion">Region</label>
        <select id="wbPlaneRegion" class="wbPlaneRegion">
            <option>Dimension</option>
            <option>Multiverse</option>
            <option>Plane</option>
        </select>

        <textarea class="wbPlaneOverview" placeholder="Overview">{{location.wbPlaneOverview}}</textarea>
        <textarea class="wbPlaneDescription" placeholder="Description">{{location.wbPlaneDescription}}</textarea>
        <textarea class="wbPlaneNPC" placeholder="Notable NPCs">{{location.wbPlaneNPC}}</textarea>
        <textarea class="wbPlaneProfile" placeholder="Profile">{{location.wbPlaneProfile}}</textarea>
        <textarea class="wbPlaneStory" placeholder="Story">{{location.wbPlaneStory}}</textarea>
        <textarea class="wbPlanePoi" placeholder="Points of Interest">{{location.wbPlanePoi}}</textarea>
        <textarea class="wbPlaneResources" placeholder="Resources">{{location.wbPlaneResources}}</textarea>
        <textarea class="wbPlaneRelationship" placeholder="Relationships">{{location.wbPlaneRelationship}}</textarea>
        <textarea class="wbPlaneBackground" placeholder="Background">{{location.wbPlaneBackground}}</textarea>
        <textarea class="wbPlaneAddDetails" placeholder="Additional Details">{{location.wbPlaneAddDetails}}</textarea>
    </div>
    {{/ifEquals}}

    <!-- Celestial-Specific Fields -->
    {{#ifEquals location.type "Celestial"}}
    <div class="location-details">
        <label for="wbCelestialRegion">Region</label>
        <select id="wbCelestialRegion" class="wbCelestialRegion">
            <option>Void</option>
            <option>Star System</option>
            <option>Quasar</option>
            <option>Nebula</option>
            <option>Galaxy</option>
            <option>Black Hole</option>
            <option>Asteroid Field</option>
            <option>Other</option>
        </select>

        <textarea class="wbCelestialOverview" placeholder="Overview">{{location.wbCelestialOverview}}</textarea>
        <input type="file" class="wbCelestialMap" accept="image/*" placeholder="Upload Map" />
        <textarea class="wbCelestialDescription" placeholder="Description">{{location.wbCelestialDescription}}</textarea>
        <textarea class="wbCelestialNPC" placeholder="Notable NPCs">{{location.wbCelestialNPC}}</textarea>
        <textarea class="wbCelestialProfile" placeholder="Profile">{{location.wbCelestialProfile}}</textarea>
        <textarea class="wbCelestialStory" placeholder="Story">{{location.wbCelestialStory}}</textarea>
        <textarea class="wbCelestialPoi" placeholder="Points of Interest">{{location.wbCelestialPoi}}</textarea>
        <textarea class="wbCelestialResources" placeholder="Resources">{{location.wbCelestialResources}}</textarea>
        <textarea class="wbCelestialRelationships" placeholder="Relationships">{{location.wbCelestialRelationships}}</textarea>
        <textarea class="wbCelestialBackground" placeholder="Background">{{location.wbCelestialBackground}}</textarea>
        <textarea class="wbCelestialAdditional" placeholder="Additional Details">{{location.wbCelestialAdditional}}</textarea>
    </div>
    {{/ifEquals}}

    <!-- Planet-Specific Fields -->
{{#ifEquals location.type "Planet"}}
<div class="location-details">
    <label for="wbPlanetGravity">Gravity</label>
    <input type="text" id="wbPlanetGravity" class="wbPlanetGravity" placeholder="Gravity (e.g., Earth-like, High, Low)" value="{{location.wbPlanetGravity}}" />

    <label for="wbPlanetAtmosphere">Atmosphere</label>
    <textarea id="wbPlanetAtmosphere" class="wbPlanetAtmosphere" placeholder="Atmosphere">{{location.wbPlanetAtmosphere}}</textarea>

    <label for="wbPlanetOrbit">Orbit</label>
    <textarea id="wbPlanetOrbit" class="wbPlanetOrbit" placeholder="Orbit">{{location.wbPlanetOrbit}}</textarea>

    <label for="wbPlanetOverview">Overview</label>
    <textarea id="wbPlanetOverview" class="wbPlanetOverview" placeholder="Overview">{{location.wbPlanetOverview}}</textarea>

    <label for="wbPlanetType">Type</label>
    <select id="wbPlanetType" class="wbPlanetType">
        <option>Barren</option>
        <option>Gas Giant</option>
        <option>Moon</option>
        <option>Other</option>
        <option>Planetoid</option>
        <option>Radiated</option>
        <option>Station</option>
        <option>Terran</option>
        <option>Toxic</option>
        <option>Vaccum</option>
    </select>

    <label for="wbPlanetClimate">Climate</label>
    <select id="wbPlanetClimate" class="wbPlanetClimate">
        <option>Arctic</option>
        <option>Arid</option>
        <option>Other</option>
        <option>Subtropical</option>
        <option>Temperate</option>
        <option>Tropical</option>
    </select>

    <label for="wbPlanetTerrainType">Terrain Type</label>
    <select id="wbPlanetTerrainType" class="wbPlanetTerrainType">
        <option>Badlands</option>
        <option>Coastal</option>
        <option>Croplands</option>
        <option>Desert</option>
        <option>Forest</option>
        <option>Grasslands</option>
        <option>Hills</option>
        <option>Jungle</option>
        <option>Marsh</option>
        <option>Mountains</option>
        <option>Other</option>
        <option>Rainforest</option>
        <option>Rocky</option>
        <option>Swamp</option>
        <option>Treacherous</option>
        <option>Tundra</option>
        <option>Underground</option>
        <option>Urban</option>
        <option>Volcanic</option>
        <option>Water</option>
    </select>

    <textarea class="wbPlentDescription" placeholder="Description">{{location.wbPlentDescription}}</textarea>
    <textarea class="wbPlanetNPC" placeholder="Notable NPCs">{{location.wbPlanetNPC}}</textarea>
    <textarea class="wbPlanetProfile" placeholder="Profile">{{location.wbPlanetProfile}}</textarea>
    <textarea class="wbPlanetStory" placeholder="Story">{{location.wbPlanetStory}}</textarea>
    <textarea class="wbPlanetPoi" placeholder="Points of Interest">{{location.wbPlanetPoi}}</textarea>
    <textarea class="wbPlanetValuables" placeholder="Valuables">{{location.wbPlanetValuables}}</textarea>
    <textarea class="wbPlanetChallenges" placeholder="Challenges">{{location.wbPlanetChallenges}}</textarea>
    <textarea class="wbPlanetObstacles" placeholder="Obstacles">{{location.wbPlanetObstacles}}</textarea>
    <textarea class="wbPlanetIntRelation" placeholder="Internal Relationships">{{location.wbPlanetIntRelation}}</textarea>
    <textarea class="wbPlanetOutRelation" placeholder="Outward Relationships">{{location.wbPlanetOutRelation}}</textarea>
    <textarea class="wbPlanetAdditional" placeholder="Additional Details">{{location.wbPlanetAdditional}}</textarea>
</div>
{{/ifEquals}}

<!-- Geographical-Specific Fields -->
{{#ifEquals location.type "Geographical"}}
<div class="location-details">
    <label for="wbGeoRegion">Region</label>
    <input type="text" id="wbGeoRegion" class="wbGeoRegion" placeholder="Enter Region" value="{{location.wbGeoRegion}}" />

    <textarea class="wbGeoOverview" placeholder="Overview">{{location.wbGeoOverview}}</textarea>

    <label for="wbGeoTerrain">Terrain</label>
    <select id="wbGeoTerrain" class="wbGeoTerrain">
        <option>Badlands</option>
        <option>Coastal</option>
        <option>Croplands</option>
        <option>Desert</option>
        <option>Forest</option>
        <option>Plains</option>
        <option>Hills</option>
        <option>Jungle</option>
        <option>Marsh</option>
        <option>Mountains</option>
        <option>Other</option>
        <option>Rainforest</option>
        <option>Rocky</option>
        <option>Swamp</option>
        <option>Treacherous</option>
        <option>Tundra</option>
        <option>Underground</option>
        <option>Urban</option>
        <option>Volcanic</option>
        <option>Water</option>
    </select>

    <label for="wbGeoClimate">Climate</label>
    <select id="wbGeoClimate" class="wbGeoClimate">
        <option>Cold</option>
        <option>Temperate</option>
        <option>Warm</option>
    </select>

    <input type="file" class="wbGeoMap" accept="image/*" placeholder="Upload Map" />

    <textarea class="wbGeoDescription" placeholder="Description">{{location.wbGeoDescription}}</textarea>
    <textarea class="wbGeoNPC" placeholder="Notable NPCs">{{location.wbGeoNPC}}</textarea>
    <textarea class="wbGeoProfile" placeholder="Profile">{{location.wbGeoProfile}}</textarea>
    <textarea class="wbGeoStory" placeholder="Story">{{location.wbGeoStory}}</textarea>
    <textarea class="wbGeoPoi" placeholder="Points of Interest">{{location.wbGeoPoi}}</textarea>
    <textarea class="wbGeoResources" placeholder="Resources">{{location.wbGeoResources}}</textarea>
    <textarea class="wbGeoRelation" placeholder="Relationships">{{location.wbGeoRelation}}</textarea>
    <textarea class="wbGeoBackground" placeholder="Background">{{location.wbGeoBackground}}</textarea>
    <textarea class="wbGeoAdditional" placeholder="Additional Details">{{location.wbGeoAdditional}}</textarea>
</div>
{{/ifEquals}}

<!-- Point of Interest-Specific Fields -->
{{#ifEquals location.type "Point of Interest"}}
<div class="location-details">
    <label for="wbPoiType">Type</label>
    <select id="wbPoiType" class="wbPoiType">
        <option>Anomaly</option>
        <option>Area</option>
        <option>Building</option>
        <option>Castle</option>
        <option>Cave</option>
        <option>Chamber</option>
        <option>Compound</option>
        <option>Corridor</option>
        <option>Dungeon</option>
        <option>Facility</option>
        <option>Keep</option>
        <option>Landmark</option>
        <option>Level</option>
        <option>Marker</option>
        <option>Merchant</option>
        <option>Other</option>
        <option>Room</option>
        <option>Ruins</option>
        <option>Shrine</option>
        <option>Temple</option>
        <option>Tower</option>
        <option>Waypoint</option>
    </select>

    <textarea class="wbPoiOverview" placeholder="Overview">{{location.wbPoiOverview}}</textarea>
    <input type="file" class="wbPoiPicture" accept="image/*" placeholder="Upload Picture" />
    <textarea class="wbPoiDescription" placeholder="Description">{{location.wbPoiDescription}}</textarea>

    <label for="wbPoiPrices">Prices</label>
    <select id="wbPoiPrices" class="wbPoiPrices">
        <option>None</option>
        <option>Cheap</option>
        <option>Average</option>
        <option>Expensive</option>
    </select>

    <label for="wbPoiQuality">Quality</label>
    <select id="wbPoiQuality" class="wbPoiQuality">
        <option>None</option>
        <option>Poor</option>
        <option>Average</option>
        <option>Superior</option>
    </select>

    <label for="wbPoiGoodsServices">Goods and Services</label>
    <select id="wbPoiGoodsServices" class="wbPoiGoodsServices">
        <option>None</option>
        <option>Commerce</option>
        <option>Communication</option>
        <option>Construction</option>
        <option>Crafting</option>
        <option>Education</option>
        <option>Entertainment</option>
        <option>Food</option>
        <option>Information</option>
        <option>Legal</option>
        <option>Lodging</option>
        <option>Maintenance</option>
        <option>Media</option>
        <option>Medical</option>
        <option>Other</option>
        <option>Personal Care</option>
        <option>Prostitution</option>
        <option>Protective</option>
        <option>Real Estate</option>
        <option>Surveillance</option>
        <option>Transportation</option>
        <option>Utility</option>
    </select>

    <textarea class="wbPoiProfile" placeholder="Profile">{{location.wbPoiProfile}}</textarea>
    <textarea class="wbPoiStory" placeholder="Story">{{location.wbPoiStory}}</textarea>
    <textarea class="wbPoiNPC" placeholder="Notable NPCs">{{location.wbPoiNPC}}</textarea>
    <textarea class="wbPoiValuables" placeholder="Valuables">{{location.wbPoiValuables}}</textarea>
    <textarea class="wbPoiChallenges" placeholder="Challenges">{{location.wbPoiChallenges}}</textarea>
    <textarea class="wbPoiObstacles" placeholder="Obstacles">{{location.wbPoiObstacles}}</textarea>
    <textarea class="wbPoiRelationships" placeholder="Relationships">{{location.wbPoiRelationships}}</textarea>
    <textarea class="wbPoiBackground" placeholder="Background">{{location.wbPoiBackground}}</textarea>
    <textarea class="wbPoiAdditional" placeholder="Additional Details">{{location.wbPoiAdditional}}</textarea>
</div>
{{/ifEquals}}


</section>






<!-- TREASURE TAB-->
<section class="tab-content" data-tab="treasure" style="display: none;">
  <h3>Treasure</h3>
  <button class="add-treasure">Add Treasure</button>
  <div class="treasure-list">
    {{#each treasures}}
      <div class="treasure-entry" data-index="{{@index}}">
        <h4>Treasure {{@index}}</h4>
        <textarea class="treasure-description" placeholder="Enter treasure description">{{this.description}}</textarea>
        
        <div class="treasure-value-selection">
          <label for="treasure-value-{{@index}}">Select Treasure Value (gp):</label>
          <select id="treasure-value-{{@index}}" class="treasure-value-dropdown">
            <option value="None">Select a Range</option>
            <option value="1-100">1-100 gp</option>
            <option value="30-180">30-180 gp</option>
            <option value="100-600">100-600 gp</option>
            <option value="100-1000">100-1000 gp</option>
            <option value="200-1200">200-1200 gp</option>
            <option value="300-1800">300-1800 gp</option>
            <option value="400-2400">400-2400 gp</option>
            <option value="500-3000">500-3000 gp</option>
            <option value="1000-4000">1000-4000 gp</option>
            <option value="1000-6000">1000-6000 gp</option>
            <option value="2000-8000">2000-8000 gp</option>
            <option value="2000-12000">2000-12000 gp</option>
          </select>
        </div>
        
        <!-- Action Buttons -->
        <div class="treasure-actions">
          <table>
            <tr>
              <td><button class="randomize-treasure">Randomize</button></td>
              <td><button class="create-item-treasure">Create Item</button></td>
              <td><button class="remove-treasure">Remove</button></td>
            </tr>
          </table>
        </div>
        
      </div>
    {{/each}}
  </div>
</section>






  <!-- MAGIC ITEM TAB -->
  <section class="tab-content" data-tab="magic-items" style="display: none;">
  <h3>Magic Items</h3>
  <button class="add-magic-item">Add Magic Item</button>

      <div class="magic-item-list">
      {{#each magicItems}}

          <div class="magic-item-entry">
          <h4>Magic Item {{@index}}</h4>

                  <select class="magic-item-type-select" data-index="{{@index}}">
                      <option value="" disabled {{#unless this.type}}selected{{/unless}}>Select a Magic Item Type</option>
                      <option value="Magic Armor" {{#if (eq this.type "Magic Armor")}}selected{{/if}}>Magic Armor</option>
                      <option value="Magic Weapons" {{#if (eq this.type "Magic Weapons")}}selected{{/if}}>Magic Weapons</option>
                      <option value="Potions" {{#if (eq this.type "Potions")}}selected{{/if}}>Potions</option>
                      <option value="Scrolls" {{#if (eq this.type "Scrolls")}}selected{{/if}}>Scrolls</option>
                      <option value="Wands" {{#if (eq this.type "Wands")}}selected{{/if}}>Wands</option>
                      <option value="Magic Misc" {{#if (eq this.type "Magic Misc")}}selected{{/if}}>Magic Misc</option>
                  </select>

              <div class="magic-item-generator-content" data-index="{{@index}}"></div>

          </div>

      {{/each}}
      </div>

  </section>

<!-- ACTORS TAB -->
<section class="tab-content tab-content wb-page-container" data-tab="actors" style="display: none;">
  <h3>Actors</h3>
  <button class="add-actor">Add Actor</button>

  <!-- Actor List -->
  <div class="actor-list wb-collapsible-section">
    {{#each actors}}
      <h3 class="wb-header wb-collapsible">Character/NPC {{@index}} Name and Culture</h3>
    <div class="wb-collapsible-content">
      <div class="actor-builder-ui" data-index="{{@index}}">
        <form class="actor-builder-form">

          <!-- Name Input -->
          <div class="form-group">
            <table class="actor-details-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Sex / Culture</th>
                  <th></th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <!-- Name Input -->
                  <td>
                    <label for="name-input-{{@index}}" class="visually-hidden"></label>
                    <input type="text" id="name-input-{{@index}}" value="{{this.name}}" data-index="{{@index}}" placeholder="Enter Name">
                  </td>

                  <!-- Culture Selection -->
                  <td>
                    <label for="culture-select-{{@index}}" class="visually-hidden"></label>
                    <select id="culture-select-{{@index}}" class="culture-select" data-index="{{@index}}">
                      <option value="" disabled selected>Select Culture</option>
                      <!-- Cultures will be populated dynamically -->
                    </select>
                  </td>

                  <!-- Actions -->
                  <td>
                    <button type="button" class="generate-name" data-index="{{@index}}">Generate Name</button>
                  </td>
                  <td>
                    <button type="button" class="delete-actor" data-index="{{@index}}">Delete Actor</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Race Selection -->
          <h3>Race and Class</h3>
          <div class="form-group">
            <table class="actor-data-table">
              <thead>
                <tr>
                  <th>Race</th>
                  <th>Class 1</th>
                  <th>Class 2</th>
                  <th>Class 3</th>
                  <th>Background</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <!-- Race Selection -->
                  <td>
                    <select id="race-select-{{@index}}" class="race-select" data-index="{{@index}}">
                      <option value="" disabled selected>Select Race</option>
                      <!-- Races will be populated dynamically -->
                    </select>
                  </td>

                  <!-- Class Selection -->
                  <td>
                    <select id="class-select-1-{{@index}}" class="class-select" data-index="{{@index}}" data-class-index="1">
                      <option value="none" {{#if (eq this.class1.uuid "none")}}selected{{/if}}>None</option>
                      {{#each ../classData}}
                        <option value="{{this.uuid}}" {{#if (eq ../../class1.uuid this.uuid)}}selected{{/if}}>{{this.name}}</option>
                      {{/each}}
                    </select>
                  </td>

                  <td>
                    <select id="class-select-2-{{@index}}" class="class-select" data-index="{{@index}}" data-class-index="2">
                      <option value="none" {{#if (eq this.class2.uuid "none")}}selected{{/if}}>None</option>
                      {{#each ../classData}}
                        <option value="{{this.uuid}}" {{#if (eq ../../class2.uuid this.uuid)}}selected{{/if}}>{{this.name}}</option>
                      {{/each}}
                    </select>
                  </td>

                  <td>
                    <select id="class-select-3-{{@index}}" class="class-select" data-index="{{@index}}" data-class-index="3">
                      <option value="none" {{#if (eq this.class3.uuid "none")}}selected{{/if}}>None</option>
                      {{#each ../classData}}
                        <option value="{{this.uuid}}" {{#if (eq ../../class3.uuid this.uuid)}}selected{{/if}}>{{this.name}}</option>
                      {{/each}}
                    </select>
                  </td>

                  <!-- Background Selection -->
                  <td>
                    <select id="background-select-{{@index}}" class="background-select" data-index="{{@index}}">
                      <option value="" disabled selected>Select Background</option>
                      {{#each ../backgroundData}}
                        <option value="{{this.uuid}}" {{#if (eq ../../background.uuid this.uuid)}}selected{{/if}}>{{this.name}}</option>
                      {{/each}}
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

<!-- Ability Scores Section -->
<div class="ability-scores">
  <h3>Ability Scores</h3>

  <!-- Roll Method Buttons -->
  <div class="form-group">
    <table class="roll-method-buttons">
      <tr>
        <td><button type="button" id="roll-dmchoice-{{@index}}" class="roll-method-button" data-index="{{@index}}" data-method="dmchoice" title="Manually Input Scores">DM's Option</button></td>
        <td><button type="button" id="roll-method1-{{@index}}" class="roll-method-button" data-index="{{@index}}" data-method="method1" title="Roll 3d6 in Order" >Method I</button></td>
        <td><button type="button" id="roll-method2-{{@index}}" class="roll-method-button" data-index="{{@index}}" data-method="method2" title="Roll 3d6*2 in Order">Method II</button></td>
        <!-- I accidently mixed up Method III and IV, For now I swapped buttons I might fix logic later -->
        <td><button type="button" id="roll-method4-{{@index}}" class="roll-method-button" data-index="{{@index}}" data-method="method4" title="Roll 3d6 Choose Order">Method III</button></td>
        <td><button type="button" id="roll-method3-{{@index}}" class="roll-method-button" data-index="{{@index}}" data-method="method3" title="Roll 3d6*2 Choose Order">Method IV</button></td>
        <td><button type="button" id="roll-method5-{{@index}}" class="roll-method-button" data-index="{{@index}}" data-method="method5" title="Roll 4d6 Drop Lowest Choose Order">Method V</button></td>
        <td><button type="button" id="roll-method6-{{@index}}" class="roll-method-button" data-index="{{@index}}" data-method="method6" title="Roll 7d6 Add to Points">Method VI</button></td>
      </tr>
    </table>
  </div>

  <!-- Ability Scores Table -->
  <table class="ability-scores-table">
    <thead>
      <tr>
        <th>Ability</th>
        <th>Assigned</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {{#each abilities}}
      <tr>
        <td>{{@key}}</td>
        <td>
          <div id="assigned-score-{{@../index}}-{{@key}}" class="assigned-score drop-zone" data-index="{{@../index}}" data-ability="{{@key}}"></div>
        </td>
        <td>
          <span id="total-score-{{@../index}}-{{@key}}" class="ability-total">{{this}}</span>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <!-- Rolled Results -->
  <div id="roll-container-{{@index}}" class="roll-container">
    <!-- Dynamically filled with dice groups -->
  </div>
</div>





<!-- this section be added in later... Maybe.

            <h3>Equipment</h3>
            <div class="form-group">
              <label for="equipment-select-{{@index}}">Equipment Package:</label>
              <select id="equipment-select-{{@index}}" data-index="{{@index}}">
                <option value="" disabled selected>Select Equipment Package</option>
                <option value="warrior" {{#if (eq this.equipmentPackage "warrior")}}selected{{/if}}>Warrior</option>
                <option value="paladin" {{#if (eq this.equipmentPackage "paladin")}}selected{{/if}}>Paladin</option>
                <option value="wizard" {{#if (eq this.equipmentPackage "wizard")}}selected{{/if}}>Wizard</option>
                <option value="priest" {{#if (eq this.equipmentPackage "priest")}}selected{{/if}}>Priest</option>
                <option value="druid" {{#if (eq this.equipmentPackage "druid")}}selected{{/if}}>Druid</option>
                <option value="rogue" {{#if (eq this.equipmentPackage "rogue")}}selected{{/if}}>Rogue</option>
                <option value="bard" {{#if (eq this.equipmentPackage "bard")}}selected{{/if}}>Bard</option>
              </select>
              <button type="button" class="build-equipment" data-index="{{@index}}">Build Equipment</button>
            </div>


            <div class="generated-equipment">
              <table id="equipment-table-{{@index}}">
                <thead>
                  <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>

                </tbody>
              </table>
            </div>
            -->

                <!-- Generate Actor -->
              <div class="actor-actions">
                <h3>Generate Actor</h3>
                <table class="actor-actions-table">
                  <tr>
                    <!-- Create Character Button -->
                    <td>
                      <button type="button" class="create-character" data-index="{{@index}}">Create Character</button>
                    </td>

                    <!-- Create NPC Button -->
                    <td>
                      <button type="button" class="create-npc" data-index="{{@index}}">Create NPC</button>
                    </td>

                    <!-- Clone NPC Dropdown -->
                    <td>
                      <label for="clone-npc-dropdown" class="visually-hidden">Clone NPC</label>
                      <select id="clone-npc-dropdown-{{@index}}" class="clone-npc-dropdown" data-index="{{@index}}">
                        <option value="none" selected>None</option>
                        {{#each npcData}}
                          <option value="{{this.id}}">{{this.name}}</option>
                        {{/each}}
                      </select>
                    </td>
                  </tr>
                </table>
              </div>

        </form>
      </div>
    </div>
    {{/each}}
  </div>
</section>

<!-- Story TAB -->
<section class="tab-content" data-tab="story" style="display: none;">
  <h3>Story</h3>
  
  <!-- Global Title -->
  <div>
    <label for="story-global-title">Title:</label>
    <input type="text" id="story-global-title" class="story-global-title" placeholder="Enter a title" value="{{storyTitle}}" />
  </div>
  
  <!-- Image Section -->
  <div class="story-image-section">
    <label for="story-global-image">Image:</label>
    <img src="{{storyImage}}" class="story-image-preview" alt="Story Image" style="max-width: 100px; max-height: 100px; display: {{#if storyImage}}block{{else}}none{{/if}};" />
    <button type="button" class="select-story-image">Select Image</button>
  </div>

  <button class="add-story">Add Story</button>

  <div class="story-list">
    {{#each story}}
      <div class="story-entry">
        <h4>Story {{@index}}</h4>
        <input type="text" class="story-title" placeholder="Title" value="{{this.title}}" />
        <textarea class="story-description" placeholder="Description">{{this.description}}</textarea>

        <!-- Additional Text Boxes 
                  Took this out for the time being.
        <div class="additional-text-boxes">
          {{#each this.additionalText}}
            <textarea class="additional-text" placeholder="Additional Text">{{this}}</textarea>
          {{/each}}
        </div>
        -->

        <!-- Add Text Button 
              Took this out for now as well.
        <button type="button" class="add-text" data-index="{{@index}}">Add Text</button>
      </div>
      -->
    {{/each}}
  </div>
</section>






  </form>

  <!-- FOOTER -->
<footer class="save-entry wb-general-footer">
      <div class="form-actions">
          <button type="button" class="save-entry wb-subfooter">
          <i class="fas fa-save"></i> Save
          </button>
          <button type="button" class="create-journal wb-subfooter">
          <i class="fas fa-book"></i> Create Journal Entry
          </button>
      </div>  
</footer>

